var b=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,a;function _(n){return{lang:(n==null?void 0:n.lang)??(a==null?void 0:a.lang),message:n==null?void 0:n.message,abortEarly:(n==null?void 0:n.abortEarly)??(a==null?void 0:a.abortEarly),abortPipeEarly:(n==null?void 0:n.abortPipeEarly)??(a==null?void 0:a.abortPipeEarly),skipPipe:n==null?void 0:n.skipPipe}}var o;function x(n){return o==null?void 0:o.get(n)}var h;function $(n){return h==null?void 0:h.get(n)}var m;function g(n,u){var e;return(e=m==null?void 0:m.get(n))==null?void 0:e.get(u)}function v(n){var e,i;let u=typeof n;return u==="object"&&(u=(n&&((i=(e=Object.getPrototypeOf(n))==null?void 0:e.constructor)==null?void 0:i.name))??"null"),u==="string"?`"${n}"`:u==="number"||u==="bigint"||u==="boolean"?`${n}`:u}function p(n,u,e,i,s){const t=s&&"input"in s?s.input:e.value,l=(s==null?void 0:s.expected)??n.expects,y=(s==null?void 0:s.received)??v(t),r={kind:n.kind,type:n.type,input:t,expected:l,received:y,message:`Invalid ${u}: ${l?`Expected ${l} but r`:"R"}eceived ${y}`,requirement:n.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:i.lang,abortEarly:i.abortEarly,abortPipeEarly:i.abortPipeEarly,skipPipe:i.skipPipe},c=n.kind==="schema",f=n.message??g(n.reference,r.lang)??(c?$(r.lang):null)??i.message??x(r.lang);f&&(r.message=typeof f=="function"?f(r):f),c&&(e.typed=!1),e.issues?e.issues.push(r):e.issues=[r]}function R(n){if(n.path){let u="";for(const e of n.path)if("key"in e&&(typeof e.key=="string"||typeof e.key=="number"))u?u+=`.${e.key}`:u+=e.key;else return null;return u}return null}function E(n,u){return{kind:"validation",type:"check",reference:E,async:!1,expects:null,requirement:n,message:u,_run(e,i){return e.typed&&!this.requirement(e.value)&&p(this,"input",e,i),e}}}function P(n){return{kind:"validation",type:"email",reference:P,expects:null,async:!1,requirement:b,message:n,_run(u,e){return u.typed&&!this.requirement.test(u.value)&&p(this,"email",u,e),u}}}function j(n,u){return{kind:"validation",type:"max_length",reference:j,async:!1,expects:`<=${n}`,requirement:n,message:u,_run(e,i){return e.typed&&e.value.length>this.requirement&&p(this,"length",e,i,{received:`${e.value.length}`}),e}}}function D(n,u){return{kind:"validation",type:"max_size",reference:D,async:!1,expects:`<=${n}`,requirement:n,message:u,_run(e,i){return e.typed&&e.value.size>this.requirement&&p(this,"size",e,i,{received:`${e.value.size}`}),e}}}function S(n,u){return{kind:"validation",type:"max_value",reference:S,async:!1,expects:`<=${n instanceof Date?n.toJSON():v(n)}`,requirement:n,message:u,_run(e,i){return e.typed&&e.value>this.requirement&&p(this,"value",e,i,{received:e.value instanceof Date?e.value.toJSON():v(e.value)}),e}}}function z(n,u){return{kind:"validation",type:"mime_type",reference:z,async:!1,expects:n.map(e=>`"${e}"`).join(" | ")||"never",requirement:n,message:u,_run(e,i){return e.typed&&!this.requirement.includes(e.value.type)&&p(this,"MIME type",e,i,{received:`"${e.value.type}"`}),e}}}function I(n,u){return{kind:"validation",type:"min_length",reference:I,async:!1,expects:`>=${n}`,requirement:n,message:u,_run(e,i){return e.typed&&e.value.length<this.requirement&&p(this,"length",e,i,{received:`${e.value.length}`}),e}}}function O(n,u){return{kind:"validation",type:"min_value",reference:O,async:!1,expects:`>=${n instanceof Date?n.toJSON():v(n)}`,requirement:n,message:u,_run(e,i){return e.typed&&e.value<this.requirement&&p(this,"value",e,i,{received:e.value instanceof Date?e.value.toJSON():v(e.value)}),e}}}function w(n,u){return{kind:"validation",type:"regex",reference:w,async:!1,expects:`${n}`,requirement:n,message:u,_run(e,i){return e.typed&&!this.requirement.test(e.value)&&p(this,"format",e,i),e}}}function C(n,u){return{...n,_run(e,i){const s=e.issues&&[...e.issues];if(n._run(e,i),e.issues){for(const t of e.issues)if(!(s!=null&&s.includes(t))){let l=e.value;for(const y of u){const r=l[y],c={type:"unknown",origin:"value",input:l,key:y,value:r};if(t.path?t.path.push(c):t.path=[c],!r)break;l=r}}}return e}}}function M(n,u,e){return typeof n.default=="function"?n.default(u,e):n.default}function N(n,u){return{kind:"schema",type:"array",reference:N,expects:"Array",async:!1,item:n,message:u,_run(e,i){var t;const s=e.value;if(Array.isArray(s)){e.typed=!0,e.value=[];for(let l=0;l<s.length;l++){const y=s[l],r=this.item._run({typed:!1,value:y},i);if(r.issues){const c={type:"array",origin:"value",input:s,key:l,value:y};for(const f of r.issues)f.path?f.path.unshift(c):f.path=[c],(t=e.issues)==null||t.push(f);if(e.issues||(e.issues=r.issues),i.abortEarly){e.typed=!1;break}}r.typed||(e.typed=!1),e.value.push(r.value)}}else p(this,"type",e,i);return e}}}function J(n,u){return{kind:"schema",type:"instance",reference:J,expects:n.name,async:!1,class:n,message:u,_run(e,i){return e.value instanceof this.class?e.typed=!0:p(this,"type",e,i),e}}}function d(n,u){return{kind:"schema",type:"literal",reference:d,expects:v(n),async:!1,literal:n,message:u,_run(e,i){return e.value===this.literal?e.typed=!0:p(this,"type",e,i),e}}}function G(n){return{kind:"schema",type:"number",reference:G,expects:"number",async:!1,message:n,_run(u,e){return typeof u.value=="number"&&!isNaN(u.value)?u.typed=!0:p(this,"type",u,e),u}}}function L(n,u){return{kind:"schema",type:"object",reference:L,expects:"Object",async:!1,entries:n,message:u,_run(e,i){var t;const s=e.value;if(s&&typeof s=="object"){e.typed=!0,e.value={};for(const l in this.entries){const y=s[l],r=this.entries[l]._run({typed:!1,value:y},i);if(r.issues){const c={type:"object",origin:"value",input:s,key:l,value:y};for(const f of r.issues)f.path?f.path.unshift(c):f.path=[c],(t=e.issues)==null||t.push(f);if(e.issues||(e.issues=r.issues),i.abortEarly){e.typed=!1;break}}r.typed||(e.typed=!1),(r.value!==void 0||l in s)&&(e.value[l]=r.value)}}else p(this,"type",e,i);return e}}}function V(n,...u){const e={kind:"schema",type:"optional",reference:V,expects:`${n.expects} | undefined`,async:!1,wrapped:n,_run(i,s){return i.value===void 0&&("default"in this&&(i.value=M(this,i,s)),i.value===void 0)?(i.typed=!0,i):this.wrapped._run(i,s)}};return 0 in u&&(e.default=u[0]),e}function q(n){return{kind:"schema",type:"string",reference:q,expects:"string",async:!1,message:n,_run(u,e){return typeof u.value=="string"?u.typed=!0:p(this,"type",u,e),u}}}function k(n){let u;if(n)for(const e of n)u?u.push(...e.issues):u=e.issues;return u}function A(n,u){return{kind:"schema",type:"union",reference:A,expects:[...new Set(n.map(e=>e.expects))].join(" | ")||"never",async:!1,options:n,message:u,_run(e,i){let s,t,l;for(const y of this.options){const r=y._run({typed:!1,value:e.value},i);if(r.typed)if(r.issues)t?t.push(r):t=[r];else{s=r;break}else l?l.push(r):l=[r]}if(s)return s;if(t){if(t.length===1)return t[0];p(this,"type",e,i,{issues:k(t)}),e.typed=!0}else{if((l==null?void 0:l.length)===1)return l[0];p(this,"type",e,i,{issues:k(l)})}return e}}}function T(...n){return{...n[0],pipe:n,_run(u,e){for(let i=0;i<n.length;i++){u=n[i]._run(u,e);const s=n[i+1];if(e.skipPipe||u.issues&&(e.abortEarly||e.abortPipeEarly||(s==null?void 0:s.kind)==="schema"||(s==null?void 0:s.kind)==="transformation")){u.typed=!1;break}}return u}}}async function X(n,u,e){const i=await n._run({typed:!1,value:u},_(e));return{typed:i.typed,success:!i.issues,output:i.value,issues:i.issues}}export{V as a,O as b,q as c,N as d,j as e,P as f,R as g,I as h,C as i,E as j,z as k,d as l,S as m,G as n,L as o,T as p,J as q,w as r,X as s,D as t,A as u};
